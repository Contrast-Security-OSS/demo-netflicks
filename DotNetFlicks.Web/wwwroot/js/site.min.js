function sortMovies(n){var t=n.find(".dropdown-item.sort-movies.active").attr("id"),i=n.find("#sort-direction").attr("data-sort"),r=n.closest("div.movie-card-container"),u=r.get(0).querySelectorAll("div.movie-card");tinysort(u,{attr:t,order:i})}function initializePersonPicker(n){$(n+" .person-picker").selectpicker().ajaxSelectPicker({ajax:{url:"../../Movie/GetPersonSelectData",data:{query:"{{{q}}}"}}})}function initializeDepartmentPicker(n){$(n+" .department-picker").selectpicker().ajaxSelectPicker({ajax:{url:"../../Movie/GetDepartmentSelectData",data:{query:"{{{q}}}"}}})}function changeRowOrder(n,t){var i=n.find("input.order"),r=parseInt(i.val());i.val(r+t)}$(function(){$('[data-toggle="tooltip"]').tooltip();$(".image-modal").on("show.bs.modal",function(n){var t=$(n.relatedTarget),r=t.data("title"),u=t.data("img-src"),i=$(this);i.find(".modal-title").text(r);i.find("img").attr("src",u)});$(".collapse-card").on("click",function(){$(this).find("[data-fa-i2svg]").toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")});$(document).on("click",".sort-movies",function(){var t=$(this),n=t.closest(".movie-sorter");n.find(".dropdown-item.sort-movies.active").removeClass("active text-white");t.addClass("active text-white");n.find("#sort-movies-dropdown").text(this.text);sortMovies(n)});$(document).on("click","#sort-direction",function(){var n=$(this),t;n.attr("data-sort",n.attr("data-sort")==="desc"?"asc":"desc");n.find("[data-fa-i2svg]").toggleClass("fa-arrow-up").toggleClass("fa-arrow-down");t=n.closest(".movie-sorter");sortMovies(t)});$("#Runtime").rules("remove","range");$("#cast-modal, #crew-modal").on("show.bs.modal",function(){initializePersonPicker("#"+$(this).attr("id"));$(this).is("#crew-modal")&&initializeDepartmentPicker("")});$("#cast-modal, #crew-modal").on("click",".add-person",function(){var n="#"+$(this).closest(".modal").attr("id"),t=n==="#cast-modal"?"../../Movie/AddCastMember":"../../Movie/AddCrewMember",i=$(n+" table tbody tr").length;$.ajax({url:t,data:{index:i},type:"GET"}).done(function(t){$(n+" table tbody").append(t);var i=n+" table tr:last";initializePersonPicker(i);n==="#crew-modal"&&initializeDepartmentPicker(i)})});$("#cast-table, #crew-table").on("click",".delete-person",function(){$(this).closest("td").find(".is-deleted").val("true");var n=$(this).closest("tr");n.hide();$(this).is("#cast-table")&&n.nextAll().each(function(n,t){changeRowOrder($(t),-1)})});$(".order-up, .order-down").click(function(){var n=$(this).closest("tr"),r=parseInt(n.find("input.order").val()),u=$("#crew-table tbody tr").length-1,t,i;$(this).is(".order-up")&&r!==0?(t=$(n).prevAll("tr:visible:first"),t.length&&(n.insertBefore(t),changeRowOrder(n,-1),changeRowOrder(t,1))):$(this).is(".order-down")&&r!==u&&(i=$(n).nextAll("tr:visible:first"),i.length&&(n.insertAfter(i),changeRowOrder(n,1),changeRowOrder(i,-1)))})});